<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Instagram</title>
    <style>
      #left{
        display:inline-block;
        vertical-align: middle;
      }
      #right{
        display:inline-block;
        vertical-align: middle;
      }
      #center{
        margin-top:100px;
      }
      #logo_subname{
        margin-left:20px;
        margin-right:20px;
        color: grey;
      }
      #sub{
        font-size : 15px;
        margin-left: 30px;
        margin-right: 30px;
        color: grey;
      }
      body #center #right #login_form {
            margin-left: 2%;
            margin-top: 30px;
            height: 500px;
            width: 60%;
            border-radius: 2px;
            border-color: rgba(158, 158, 158, 0.35);
            border-style: solid;
            border-width: 1px;
            background-color: white;
          }
      body #center #right #login_form #logo_name {
              padding-top: 20px;
              padding-bottom: 10px;
              margin-top: 20px;
              text-decoration: none;
              font-family: "Cookie", cursive;
              font-size: 30px;
              color: black;
              text-align: center;
            }
            body #center #right #login_form ._form input{
              width : 80%;
              height: 27px;
              border-radius:2px;
              border-style:solid;
              border-width:1px;
              margin-top:5px;
              margin-bottom:5px;
              margin-left:1%;
              padding-left: 2%;
              font-size: 15px;
              border-color: rgba(158, 158, 158, 0.35);
            }
      body #center #right #login_form .submit_button button {
             width: 80%;
             height: 35px;
             border-radius: 2px;
             border-style: hidden;
             margin-top: 7px;
             margin-left: 1%;
             background-color: #3897f0;
             color: white;
             font-size: 15px;
             cursor: pointer;
            }
            body #center #right #login_form #small_caption {
              color: grey;
              text-align: center;
              margin-top: 20px;
              font-size: 13px; }
          body #center #right #login_form #other_login {
            height: 60px;
            margin-top: 30px;
            margin-left: 12%;
            margin-right: 12%;
            border-top-style: solid;
            border-top-color: rgba(158, 158, 158, 0.35);
            border-width: 2px;
            padding-top: 20px;
            text-align: center;
            color: #385185;
           }

            body #center #right #question ._question {
            margin-left: 2%;
            margin-top: 15px;
            height: 30px;
            width: 60%;
            border-radius: 2px;
            border-color: rgba(158, 158, 158, 0.35);
            border-style: solid;
            border-width: 1px;
            background-color: white;
            display: inline-block;
            text-align: center;
            padding-top: 20px;
          }
            body #center #right #question ._question span {
              color: #3897f0;
              margin-left: 3px;
              cursor: pointer;
            }
            #ErrorAlert{
              color : red;
            }
    </style>
  </head>
  <body>
    <center>
    <div id="center">
    <div id="right">
      <div id="login_form">
        <div id="logo_name">Instagram</div>
        <div id="logo_subname">친구들의 사진과 동영상을 보려면
          가입하세요.</div>
          <div id="login_button" class="submit_button">
            <button type = "login">facebook으로 로그인</button>
          </div>

          <div id="line"><hr>또는</hr> </div>
        <div id="join_group">
        <div id="join_name" class="_form">
          <input id = "join_name_input1" type="text" name="name" placeholder="휴대폰 번호 또는 이메일 주소" autocomplete="off">
        </div>
        <div id="join_name2" class="_form">
          <input id = "join_name2_input1" type="text" name="name2" placeholder="성명" autocomplete="off">
        </div>
        <div id="join_name3" class="_form">
          <input id = "join_name3_input1" type="text" name="name3" placeholder="사용자 이름" autocomplete="off">
        </div>
        <div id="join_password" class="_form">
          <input id = "join_password_input" type="password" name="password" placeholder="비밀번호" autocomplete="off">
        </div>
        <div id="join_button" class="submit_button">
          <button type = "submit">가입</button>
        </div>
        <div id="ErrorAlert" aria-atomic = "true" role="alert" style="display:none" >필수 항목입니다.</div>
        <div id="sub">가입하면 instagram의 <a>약관</a> 및 <a>개인 정보처리방침</a>에 동의하게 됩니다.
        </div>
      </div>
      <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
      <script type = "text/javascript">
        function emailCheck(){
          var emailAddr = document.getElementById("join_name_input1");
          var Check = /^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/;

          if(Check.exec(emailAddr)!=null || emailAddr.value=='' || emailAddr.value==null){
              emailAddr.style.border = "1px solid red";
              document.getElementById("ErrorAlert").style.display="block";

          }else{
              emailAddr.style.border = "1px solid rgba(158, 158, 158, 0.35)";
          }
        }
        function nameCheck(){
          var name = document.getElementById("join_name2_input1");
          if(name.value==''||name.value== null){
            name.style.border = "1px solid red";
            document.getElementById("ErrorAlert").style.display="block";
        }else{
            name.style.border = "1px solid rgba(158, 158, 158, 0.35)";
        }
        }
        function nameCheck2(){
          var name2 = document.getElementById("join_name3_input1");
          if(name2.value==''||name2.value== null){
            name2.style.border = "1px solid red";
            document.getElementById("ErrorAlert").style.display="block";
        }else{
            name2.style.border = "1px solid rgba(158, 158, 158, 0.35)";
        }
        }
        function passwordCheck(){
          var name3 = document.getElementById("join_password_input");
          if(name3.value==''||name3.value== null){
             name3.style.border = "1px solid red";
             document.getElementById("ErrorAlert").style.display="block";
        }else{
            name3.style.border = "1px solid rgba(158, 158, 158, 0.35)";
        }

        }
        var btn = document.getElementById("join_button");
        function submit(){
          emailCheck();
          nameCheck();
          nameCheck2();
          passwordCheck();
        }
        /*
        btn.onclick = function(){
          submit();
        }
        */
        $(document).ready(function(){
          $('#join_button').click(function(){
            var email = $('#join_name_input1').val();
            var name = $('#join_name2_input1').val();
            var username = $('#join_name3_input1').val();
            var password = $('#join_password_input').val();
            var data = {
              'email':email,
              'name':name,
              'username':username,
              'password': password
            }
            $.ajax({
              type:"POST",
              url:"/",
              cache: false,
              datatype:"json",
              data:data,
              success:function(result){
                alert('가입 성공!');
                console.log(result);
                if(result.status == 200){
                  self.isEditMode(!self.isEditMode());
                }
              },
              error: function(request,status,error){
                alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
              }
            }).complete(function(){
              $(window).attr('location','/mypage');
            });
          });
        });



      </script>
</div>
      <div id="question">
        <div id="login" class="_question"> 계정이 없으신가요? <span>로그인</span></div>

      </div>
  </center>
  </body>
</html>
